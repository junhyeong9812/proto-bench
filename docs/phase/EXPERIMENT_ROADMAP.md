# Proto-Bench ì‹¤í—˜ ë¡œë“œë§µ

## í”„ë¡œì íŠ¸ ëª©í‘œ

**HTTPì™€ gRPC í”„ë¡œí† ì½œì˜ ì„±ëŠ¥ì„ ë‹¤ì–‘í•œ ì¡°ê±´ì—ì„œ ë¹„êµí•˜ì—¬, ê° í”„ë¡œí† ì½œì´ ìœ ë¦¬í•œ ìƒí™©ì„ ì •ëŸ‰ì ìœ¼ë¡œ ë¶„ì„í•©ë‹ˆë‹¤.**

---

## ì‹¤í—˜ Phase ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Proto-Bench ì‹¤í—˜ ë¡œë“œë§µ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  Phase 1: ëŒ€ìš©ëŸ‰ í˜ì´ë¡œë“œ (1MB)                                      â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                     â”‚
â”‚  âœ… ì™„ë£Œ                                                             â”‚
â”‚  ê²°ê³¼: HTTP/Binary ì••ë„ì  ìš°ìœ„ (gRPC ëŒ€ë¹„ 2ë°° ì²˜ë¦¬ëŸ‰)                  â”‚
â”‚  ì¸ì‚¬ì´íŠ¸: Protobuf ì§ë ¬í™” ì˜¤ë²„í—¤ë“œê°€ ëŒ€ìš©ëŸ‰ì—ì„œ ë¶ˆë¦¬                   â”‚
â”‚                                                                     â”‚
â”‚                          â†“                                          â”‚
â”‚                                                                     â”‚
â”‚  Phase 2: ì†Œìš©ëŸ‰ í˜ì´ë¡œë“œ (1KB, 10KB)                                â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                â”‚
â”‚  ğŸ”„ ì§„í–‰ ì¤‘                                                          â”‚
â”‚  ëª©í‘œ: HTTP í—¤ë” ì˜¤ë²„í—¤ë“œ vs gRPC ë°”ì´ë„ˆë¦¬ íš¨ìœ¨ ë¹„êµ                   â”‚
â”‚  ì˜ˆìƒ: gRPC ìš°ìœ„ ì „í™˜ì  ë°œê²¬                                          â”‚
â”‚                                                                     â”‚
â”‚                          â†“                                          â”‚
â”‚                                                                     â”‚
â”‚  Phase 3: ê³ ë™ì‹œì„± (100+ VU)                                        â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                       â”‚
â”‚  ğŸ“‹ ì˜ˆì •                                                             â”‚
â”‚  ëª©í‘œ: HTTP/2 ë©€í‹°í”Œë ‰ì‹± íš¨ê³¼ ê²€ì¦                                    â”‚
â”‚  ì˜ˆìƒ: ì—°ê²° ì¬ì‚¬ìš©ì—ì„œ gRPC ìš°ìœ„                                      â”‚
â”‚                                                                     â”‚
â”‚                          â†“                                          â”‚
â”‚                                                                     â”‚
â”‚  Phase 4: ë³µì¡í•œ ë°ì´í„° êµ¬ì¡°                                         â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                         â”‚
â”‚  ğŸ“‹ ì˜ˆì •                                                             â”‚
â”‚  ëª©í‘œ: JSON íŒŒì‹± vs Protobuf íŒŒì‹± ì„±ëŠ¥ ë¹„êµ                          â”‚
â”‚  ì˜ˆìƒ: í•„ë“œê°€ ë§ì„ìˆ˜ë¡ gRPC ìš°ìœ„                                      â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Phaseë³„ ìƒì„¸ ì„¤ëª…

### Phase 1: ëŒ€ìš©ëŸ‰ í˜ì´ë¡œë“œ (1MB) âœ… ì™„ë£Œ

#### ëª©ì 
ëŒ€ìš©ëŸ‰ ë°”ì´ë„ˆë¦¬ ë°ì´í„° ì „ì†¡ì—ì„œ í”„ë¡œí† ì½œ ì„±ëŠ¥ ë¹„êµ

#### í…ŒìŠ¤íŠ¸ ì¡°ê±´
- í˜ì´ë¡œë“œ: 1MB
- VU: 10
- ì‹œê°„: 30ì´ˆ

#### ê²°ê³¼ ìš”ì•½
| í”„ë¡œí† ì½œ | Throughput | Latency avg |
|---------|------------|-------------|
| HTTP/Binary | 2,506 req/s | 2.70ms |
| gRPC/Unary | 1,187 req/s | 6.87ms |
| HTTP/JSON | 515 req/s | 17.42ms |
| gRPC/Stream | 211 req/s | 44.53ms |

#### ê²°ë¡ 
- HTTP/Binaryê°€ ì••ë„ì  ìš°ìœ„
- Protobuf ì§ë ¬í™”ê°€ ëŒ€ìš©ëŸ‰ì—ì„œ ì˜¤ë²„í—¤ë“œ
- gRPC ìŠ¤íŠ¸ë¦¬ë°ì€ ì²­í¬ ë¶„í•  ì˜¤ë²„í—¤ë“œë¡œ ìµœì•…

ğŸ“„ ìƒì„¸ ë¬¸ì„œ: [PHASE1_RESULT.md](./PHASE1_RESULT.md)

---

### Phase 2: ì†Œìš©ëŸ‰ í˜ì´ë¡œë“œ (1KB, 10KB) ğŸ”„ ì§„í–‰ ì¤‘

#### ëª©ì 
í˜ì´ë¡œë“œê°€ ì‘ì•„ì§ˆìˆ˜ë¡ HTTP í—¤ë” ì˜¤ë²„í—¤ë“œê°€ ìƒëŒ€ì ìœ¼ë¡œ ì»¤ì§€ëŠ”ì§€ í™•ì¸

#### ê°€ì„¤
> "1KB í˜ì´ë¡œë“œì—ì„œëŠ” HTTP í—¤ë”(~400B)ê°€ í˜ì´ë¡œë“œì˜ 40%ë¥¼ ì°¨ì§€í•˜ì—¬
> gRPCì˜ ë°”ì´ë„ˆë¦¬ íš¨ìœ¨ì´ ë°œíœ˜ë  ê²ƒì´ë‹¤"

#### í…ŒìŠ¤íŠ¸ ë§¤íŠ¸ë¦­ìŠ¤
| í¬ê¸° | HTTP/JSON | HTTP/Binary | gRPC/Unary | gRPC/Stream |
|-----|-----------|-------------|------------|-------------|
| 1KB | âœ… | âœ… | âœ… | âœ… |
| 10KB | âœ… | âœ… | âœ… | âœ… |

#### ì˜ˆìƒ ê²°ê³¼
- 1KB: gRPC/Unary > HTTP/Binary
- 10KB: gRPC/Unary â‰ˆ HTTP/Binary

ğŸ“„ ì„¤ê³„ ë¬¸ì„œ: [PHASE2_DESIGN.md](./PHASE2_DESIGN.md)

---

### Phase 3: ê³ ë™ì‹œì„± (100+ VU) ğŸ“‹ ì˜ˆì •

#### ëª©ì 
HTTP/2ì˜ ë©€í‹°í”Œë ‰ì‹±ì´ ë™ì‹œ ìš”ì²­ì—ì„œ ì–¼ë§ˆë‚˜ íš¨ê³¼ì ì¸ì§€ í™•ì¸

#### ê°€ì„¤
> "100ëª… ì´ìƒì˜ ë™ì‹œ ì ‘ì†ìê°€ ê°ê° ì—¬ëŸ¬ ìš”ì²­ì„ ë³´ë‚¼ ë•Œ,
> HTTP/1.1ì€ ì»¤ë„¥ì…˜ ë¶€ì¡±ìœ¼ë¡œ ëŠë ¤ì§€ê³ 
> HTTP/2 ê¸°ë°˜ gRPCëŠ” í•˜ë‚˜ì˜ ì—°ê²°ì—ì„œ ëª¨ë‘ ì²˜ë¦¬í•˜ì—¬ ìœ ë¦¬í•  ê²ƒì´ë‹¤"

#### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
```
ì‹œë‚˜ë¦¬ì˜¤ A: ìˆœì°¨ ìš”ì²­ (1 VUê°€ 100ë²ˆ ìš”ì²­)
ì‹œë‚˜ë¦¬ì˜¤ B: ë™ì‹œ ìš”ì²­ (100 VUê°€ ê° 1ë²ˆ ìš”ì²­)
ì‹œë‚˜ë¦¬ì˜¤ C: í­ë°œì  ìš”ì²­ (100 VUê°€ ê° 10ë²ˆ ë™ì‹œ ìš”ì²­)
```

#### ê²€ì¦ í¬ì¸íŠ¸
1. ì—°ê²° ìˆ˜ ë¹„êµ (HTTP/1.1 vs HTTP/2)
2. ì—°ê²° ì„¤ì • ì˜¤ë²„í—¤ë“œ
3. Keep-Alive íš¨ê³¼

---

### Phase 4: ë³µì¡í•œ ë°ì´í„° êµ¬ì¡° ğŸ“‹ ì˜ˆì •

#### ëª©ì 
ë‹¨ìˆœ byte[] ëŒ€ì‹  ë³µì¡í•œ ê°ì²´(ì—¬ëŸ¬ í•„ë“œ, ì¤‘ì²© êµ¬ì¡°)ë¥¼ ì „ì†¡í•  ë•Œ ì§ë ¬í™” ì„±ëŠ¥ ë¹„êµ

#### ê°€ì„¤
> "í•„ë“œê°€ ë§ê³  ì¤‘ì²©ëœ ë³µì¡í•œ ê°ì²´ì—ì„œëŠ”
> JSON íŒŒì‹± ë¹„ìš©ì´ Protobufë³´ë‹¤ ì»¤ì„œ
> gRPCê°€ ìœ ë¦¬í•  ê²ƒì´ë‹¤"

#### í…ŒìŠ¤íŠ¸ ë°ì´í„° êµ¬ì¡°
```protobuf
message ComplexData {
    string id = 1;
    string name = 2;
    int32 age = 3;
    double score = 4;
    repeated string tags = 5;           // ë°°ì—´
    Address address = 6;                 // ì¤‘ì²© ê°ì²´
    repeated Order orders = 7;           // ì¤‘ì²© ë°°ì—´
    map<string, string> metadata = 8;    // ë§µ
}

message Address {
    string city = 1;
    string street = 2;
    string zipcode = 3;
}

message Order {
    string orderId = 1;
    double amount = 2;
    repeated Item items = 3;
}
```

#### ê²€ì¦ í¬ì¸íŠ¸
1. í•„ë“œ ìˆ˜ì— ë”°ë¥¸ íŒŒì‹± ì‹œê°„
2. ì¤‘ì²© ê¹Šì´ì— ë”°ë¥¸ ì˜í–¥
3. ë°°ì—´ í¬ê¸°ì— ë”°ë¥¸ ì˜í–¥

---

## ê²°ê³¼ ì˜ˆì¸¡ ê·¸ë˜í”„

```
ì„±ëŠ¥ ìš°ìœ„ ì˜ˆì¸¡ (ë†’ì„ìˆ˜ë¡ gRPC ìœ ë¦¬)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                    HTTP ìš°ìœ„ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ gRPC ìš°ìœ„
                         -100%            0            +100%

Phase 1 (1MB)        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  HTTP ìš°ìœ„
                     
Phase 2 (1KB)        â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  gRPC ìš°ìœ„ (ì˜ˆìƒ)

Phase 3 (ê³ ë™ì‹œì„±)    â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ gRPC ìš°ìœ„ (ì˜ˆìƒ)

Phase 4 (ë³µì¡êµ¬ì¡°)    â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  gRPC ìš°ìœ„ (ì˜ˆìƒ)
```

---

## ê¸°ìˆ  ìŠ¤íƒ ë° ë„êµ¬

### ì„œë²„ êµ¬í˜„
- **ì–¸ì–´**: Kotlin
- **í”„ë ˆì„ì›Œí¬**: Spring Boot 3.x
- **HTTP í´ë¼ì´ì–¸íŠ¸**: Spring WebFlux (WebClient)
- **gRPC**: grpc-kotlin, grpc-netty

### ë¶€í•˜ í…ŒìŠ¤íŠ¸
- **ë„êµ¬**: k6 (Grafana)
- **ë©”íŠ¸ë¦­**: JMX MXBean (ë©”ëª¨ë¦¬, GC)

### ë¹Œë“œ ë„êµ¬
- **ë¹Œë“œ**: Gradle (Kotlin DSL)
- **Proto ì»´íŒŒì¼**: protobuf-gradle-plugin

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
proto-bench/
â”œâ”€â”€ docs/                        # ë¬¸ì„œ
â”‚   â”œâ”€â”€ GRPC_GUIDE.md           # gRPC í•™ìŠµ ê°€ì´ë“œ
â”‚   â”œâ”€â”€ K6_GUIDE.md             # k6 í•™ìŠµ ê°€ì´ë“œ
â”‚   â”œâ”€â”€ PHASE1_RESULT.md        # Phase 1 ê²°ê³¼ ë¶„ì„
â”‚   â”œâ”€â”€ PHASE2_DESIGN.md        # Phase 2 ì„¤ê³„
â”‚   â””â”€â”€ EXPERIMENT_ROADMAP.md   # ì‹¤í—˜ ë¡œë“œë§µ (í˜„ì¬ ë¬¸ì„œ)
â”‚
â”œâ”€â”€ apiServer/                   # API ê²Œì´íŠ¸ì›¨ì´
â”œâ”€â”€ dataServer/                  # ë°ì´í„° ì„œë²„
â”œâ”€â”€ proto/                       # Protobuf ì •ì˜
â”œâ”€â”€ scripts/                     # k6 í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ phase1/                 # Phase 1 ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ phase2/                 # Phase 2 ìŠ¤í¬ë¦½íŠ¸
â”‚   â””â”€â”€ results/                # ê²°ê³¼ ë¡œê·¸
â””â”€â”€ README.md
```

---

## ë‹¤ìŒ ë‹¨ê³„

1. **Phase 2 í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±**
2. **Phase 2 ì‹¤í—˜ ìˆ˜í–‰ ë° ê²°ê³¼ ë¶„ì„**
3. **Phase 3/4 ì„¤ê³„ ë¬¸ì„œ ì‘ì„±**

---

## ì—°ë½ì²˜ ë° ê¸°ì—¬

ì´ í”„ë¡œì íŠ¸ëŠ” HTTP vs gRPC ì„±ëŠ¥ ë¹„êµ í•™ìŠµì„ ìœ„í•œ ë²¤ì¹˜ë§ˆí¬ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.
ê²°ê³¼ë‚˜ ë¶„ì„ì— ëŒ€í•œ í”¼ë“œë°±ì€ ì–¸ì œë“  í™˜ì˜í•©ë‹ˆë‹¤!