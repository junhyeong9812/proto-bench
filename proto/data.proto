syntax = "proto3";

package protobench;

option java_multiple_files = true;
option java_package = "com.protobench.proto";
option java_outer_classname = "DataProto";

// 데이터 요청
message DataRequest {
  string request_id = 1;
}

// 데이터 응답 (1MB 페이로드)
message DataResponse {
  string request_id = 1;
  bytes payload = 2;           // 1MB 바이너리 데이터
  int64 timestamp = 3;
  int32 payload_size = 4;
}

// 스트리밍용 청크 응답
message DataChunk {
  string request_id = 1;
  bytes chunk = 2;             // 청크 데이터
  int32 chunk_index = 3;
  int32 total_chunks = 4;
  bool is_last = 5;
}

// 데이터 서비스
service DataService {
  // 단일 요청-응답
  rpc GetData(DataRequest) returns (DataResponse);

  // 서버 스트리밍 (1MB를 청크로 나눠서 전송)
  rpc GetDataStream(DataRequest) returns (stream DataChunk);
}